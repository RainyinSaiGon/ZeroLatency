<div class="register-page">
    <!-- Background Pattern -->
    <div class="bg-pattern"></div>

    <div class="brand-header">
        <a class="brand" routerLink="/">
            <div class="brand-icon">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M13 2L3 14h8l-1 8 10-12h-8l1-8z" fill="currentColor" />
                </svg>
            </div>
            <span class="brand-name">Zero Latency</span>
        </a>
    </div>

    <div class="register-container">
        <div class="register-left">
            <div class="hero-content">
                <h1>Join the community</h1>
                <p>Connect with thousands of developers discussing distributed systems, microservices, and scalable
                    architecture.</p>

                <!-- Feature Highlights -->
                <div class="feature-highlights">
                    <div class="feature-card" *ngFor="let feature of features; let i = index"
                        [style.animation-delay]="i * 0.15 + 's'">
                        <div class="feature-icon" [ngSwitch]="feature.icon">
                            <svg *ngSwitchCase="'discussions'" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
                            </svg>
                            <svg *ngSwitchCase="'experts'" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                                <circle cx="9" cy="7" r="4" />
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                                <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                            </svg>
                            <svg *ngSwitchCase="'resources'" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" />
                                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" />
                            </svg>
                        </div>
                        <div class="feature-content">
                            <h3>{{ feature.title }}</h3>
                            <p>{{ feature.description }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="register-right">
            <!-- Success Animation -->
            <div class="register-box success-state" *ngIf="showSuccess">
                <div class="success-animation">
                    <svg class="checkmark" viewBox="0 0 52 52">
                        <circle class="checkmark-circle" cx="26" cy="26" r="25" fill="none" />
                        <path class="checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
                    </svg>
                    <h3>Account created!</h3>
                    <p>Redirecting to login...</p>
                </div>
            </div>

            <!-- Register Form -->
            <div class="register-box" *ngIf="!showSuccess">
                <div class="register-header">
                    <h2>Create your account</h2>
                    <p>Start your journey with Zero Latency</p>
                </div>

                <form [formGroup]="form" (ngSubmit)="onSubmit()">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="username">Username</label>
                            <input type="text" id="username" formControlName="username" placeholder="johndoe"
                                class="form-control" [class.is-invalid]="username?.invalid && username?.touched" />
                            <div class="error-text" *ngIf="username?.invalid && username?.touched">
                                <span *ngIf="username?.errors?.['required']">Username is required</span>
                                <span *ngIf="username?.errors?.['minlength']">Min 3 characters</span>
                                <span *ngIf="username?.errors?.['maxlength']">Max 20 characters</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" formControlName="email" placeholder="you@example.com"
                            class="form-control" [class.is-invalid]="email?.invalid && email?.touched" />
                        <div class="error-text" *ngIf="email?.invalid && email?.touched">
                            <span *ngIf="email?.errors?.['required']">Email is required</span>
                            <span *ngIf="email?.errors?.['email']">Enter a valid email</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="password">Password</label>
                        <div class="password-input-wrapper">
                            <input [type]="showPassword ? 'text' : 'password'" id="password" formControlName="password"
                                placeholder="Min 8 characters" class="form-control"
                                [class.is-invalid]="password?.invalid && password?.touched" />
                            <button type="button" class="password-toggle"
                                (click)="togglePasswordVisibility('password')">
                                <svg *ngIf="!showPassword" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                                    <circle cx="12" cy="12" r="3" />
                                </svg>
                                <svg *ngIf="showPassword" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path
                                        d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24" />
                                    <line x1="1" y1="1" x2="23" y2="23" />
                                </svg>
                            </button>
                        </div>
                        <div class="error-text" *ngIf="password?.invalid && password?.touched">
                            <span *ngIf="password?.errors?.['required']">Password is required</span>
                            <span *ngIf="password?.errors?.['minlength']">Min 8 characters</span>
                        </div>
                        <!-- Password Strength Meter -->
                        <div class="password-strength" *ngIf="password?.value">
                            <div class="strength-bar">
                                <div class="strength-fill" [style.width.%]="passwordStrength.percent"
                                    [style.background]="passwordStrength.color">
                                </div>
                            </div>
                            <span class="strength-text" [style.color]="passwordStrength.color">
                                {{ passwordStrength.level }}
                            </span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <div class="password-input-wrapper">
                            <input [type]="showConfirmPassword ? 'text' : 'password'" id="confirmPassword"
                                formControlName="confirmPassword" placeholder="Confirm your password"
                                class="form-control"
                                [class.is-invalid]="confirmPassword?.invalid && confirmPassword?.touched" />
                            <button type="button" class="password-toggle" (click)="togglePasswordVisibility('confirm')">
                                <svg *ngIf="!showConfirmPassword" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                                    <circle cx="12" cy="12" r="3" />
                                </svg>
                                <svg *ngIf="showConfirmPassword" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path
                                        d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24" />
                                    <line x1="1" y1="1" x2="23" y2="23" />
                                </svg>
                            </button>
                        </div>
                        <div class="error-text" *ngIf="confirmPassword?.invalid && confirmPassword?.touched">
                            <span *ngIf="confirmPassword?.errors?.['required']">Please confirm password</span>
                            <span *ngIf="confirmPassword?.errors?.['passwordMismatch']">Passwords don't match</span>
                        </div>
                    </div>

                    <!-- Terms Checkbox -->
                    <div class="terms-checkbox">
                        <label class="checkbox-wrapper">
                            <input type="checkbox" formControlName="agreeTerms" />
                            <span class="checkmark-box"></span>
                            <span class="checkbox-label">I agree to the <a href="#">Terms of Service</a> and <a
                                    href="#">Privacy Policy</a></span>
                        </label>
                    </div>

                    <div class="error-message" *ngIf="errorMessage">
                        {{ errorMessage }}
                    </div>

                    <button type="submit" class="btn btn-primary" [disabled]="form.invalid || isSubmitting"
                        [class.loading]="isSubmitting">
                        <span *ngIf="!isSubmitting">Create Account</span>
                        <span *ngIf="isSubmitting" class="loading-spinner"></span>
                        <span *ngIf="isSubmitting">Creating account...</span>
                    </button>
                </form>

                <!-- Divider -->
                <div class="divider">
                    <span>or continue with</span>
                </div>

                <!-- OAuth Circle Buttons -->
                <div class="oauth-circles">
                    <button type="button" class="oauth-circle github" (click)="registerWithGitHub()" title="GitHub">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                        </svg>
                    </button>
                    <button type="button" class="oauth-circle google" (click)="registerWithGoogle()" title="Google">
                        <svg viewBox="0 0 24 24">
                            <path fill="#4285F4"
                                d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                            <path fill="#34A853"
                                d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                            <path fill="#FBBC05"
                                d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" />
                            <path fill="#EA4335"
                                d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
                        </svg>
                    </button>
                </div>

                <div class="register-footer">
                    <p>Already have an account? <a routerLink="/auth/login" class="login-link">Sign in</a></p>
                </div>
            </div>
        </div>
    </div>
</div>